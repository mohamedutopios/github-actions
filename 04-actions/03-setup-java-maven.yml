# ============================================================
# DÃ‰MO 3/4 â€” Actions : setup-java + cache Maven
# ============================================================
# "actions/setup-java" installe le JDK sur la machine.
#
# ParamÃ¨tres importants :
#   java-version : "17", "21"â€¦
#   distribution : "temurin" (Eclipse Adoptium â€” recommandÃ©)
#                  "zulu", "corretto" (AWS), "microsoft"
#   cache        : "maven" ou "gradle" pour accÃ©lÃ©rer les builds
# ============================================================

name: "15 Â· Action setup-java + Maven"

on: workflow_dispatch

jobs:
  demo-java:
    name: "setup-java avec cache Maven"
    runs-on: ubuntu-latest

    steps:
      - name: "ğŸ“¥ Checkout"
        uses: actions/checkout@v4

      - name: "â˜• Configurer Java 17 (Temurin) avec cache Maven"
        uses: actions/setup-java@v4
        with:
          java-version: "17"         # version du JDK
          distribution: "temurin"    # distribution (Eclipse Adoptium)
          cache: "maven"             # met ~/.m2/repository en cache

      - name: "ğŸ” VÃ©rifier la version installÃ©e"
        run: |
          echo "Java  : $(java --version)"
          echo "Javac : $(javac --version)"

      - name: "ğŸ”¨ Builder avec Maven (si pom.xml existe)"
        run: |
          if [ -f pom.xml ]; then
            mvn -B verify --no-transfer-progress
            echo "âœ… Build Maven rÃ©ussi"
          else
            echo "â„¹ï¸ Pas de pom.xml dans ce dÃ©pÃ´t"
          fi
