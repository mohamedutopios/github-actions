# ============================================================
# D√âMO 2/4 ‚Äî Variables : contextes GitHub ${{ github.xxx }}
# ============================================================
# GitHub injecte automatiquement des informations sur le run
# via des "contextes". Syntaxe : ${{ github.propriete }}
#
# Ces variables sont diff√©rentes des variables d'env shell :
#   $NOM_VAR          ‚Üí variable shell classique
#   ${{ github.xxx }} ‚Üí contexte GitHub Actions (expression)
#
# Les deux peuvent √™tre mix√©s dans un m√™me run:
# ============================================================

name: "18 ¬∑ Contextes github.xxx"

on:
  push:
  workflow_dispatch:

jobs:
  afficher-contextes:
    name: "Toutes les infos du contexte"
    runs-on: ubuntu-latest

    steps:
      - name: "üè† Informations sur le d√©p√¥t"
        run: |
          echo "=== D√©p√¥t ==="
          echo "D√©p√¥t          : ${{ github.repository }}"
          echo "Propri√©taire   : ${{ github.repository_owner }}"
          echo "URL            : ${{ github.server_url }}/${{ github.repository }}"

      - name: "‚ö° Informations sur l'√©v√©nement"
        run: |
          echo "=== √âv√©nement ==="
          echo "Type           : ${{ github.event_name }}"
          echo "Branche        : ${{ github.ref_name }}"
          echo "Ref compl√®te   : ${{ github.ref }}"

      - name: "üë§ Informations sur l'auteur"
        run: |
          echo "=== Auteur ==="
          echo "Acteur         : ${{ github.actor }}"

      - name: "üîñ Informations sur le commit"
        run: |
          echo "=== Commit ==="
          echo "SHA complet    : ${{ github.sha }}"
          echo "SHA court      : ${GITHUB_SHA:0:7}"

      - name: "üî¢ Informations sur le run"
        run: |
          echo "=== Run ==="
          echo "Num√©ro         : ${{ github.run_number }}"
          echo "ID             : ${{ github.run_id }}"
          echo "URL du run     : ${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }}"
